"use strict";(self.webpackChunkvspacecode_github_io=self.webpackChunkvspacecode_github_io||[]).push([[299],{3905:function(e,n,t){t.d(n,{kt:function(){return h}});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),c=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=c(t),u=a,m=h["".concat(s,".").concat(u)]||h[u]||d[u]||o;return t?i.createElement(m,r(r({ref:n},p),{},{components:t})):i.createElement(m,r({ref:n},p))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var c=2;c<o;c++)r[c]=t[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3191:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return h}});var i=t(7462),a=t(3366),o=(t(7294),t(3905)),r=["components"],l={id:"extra",title:"Extra"},s=void 0,c={unversionedId:"whichkey/extra",id:"whichkey/extra",isDocsHomePage:!1,title:"Extra",description:"This section config extra settings that pertain to both Standalone or With extension.",source:"@site/docs/whichkey/extra.md",sourceDirName:"whichkey",slug:"/whichkey/extra",permalink:"/docs/whichkey/extra",editUrl:"https://github.com/VSpaceCode/vspacecode.github.io/edit/master/docs/whichkey/extra.md",version:"current",frontMatter:{id:"extra",title:"Extra"},sidebar:"docs",previous:{title:"Usage",permalink:"/docs/whichkey"},next:{title:"Reference",permalink:"/docs/whichkey/reference"}},d=[{value:"Use non-character keys",id:"use-non-character-keys",children:[]},{value:"Display menu with a delay",id:"display-menu-with-a-delay",children:[]},{value:"Display menu items alphabetically",id:"display-menu-items-alphabetically",children:[]},{value:"Unclear selection",id:"unclear-selection",children:[]},{value:"Style the menu with Customize UI",id:"style-the-menu-with-customize-ui",children:[]},{value:"Conditional bindings (experimental)",id:"conditional-bindings-experimental",children:[{value:"Overrides",id:"overrides",children:[]},{value:"when",id:"when",children:[]},{value:"languageId",id:"languageid",children:[]}]}],p={toc:d};function h(e){var n=e.components,l=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},p,l,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This section config extra settings that pertain to both Standalone or With extension."),(0,o.kt)("h2",{id:"use-non-character-keys"},"Use non-character keys"),(0,o.kt)("p",null,"This section describes a way to use non-character keys in which-key menu like ",(0,o.kt)("inlineCode",{parentName:"p"},"<tab>")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Control+D"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},"<tab>")," is supported out of the box. Follow the following instruction to add support for keys other than ",(0,o.kt)("inlineCode",{parentName:"p"},"<tab>"),"."),(0,o.kt)("p",null,"Merge the following json to your ",(0,o.kt)("inlineCode",{parentName:"p"},"keybindings.json"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "key": "ctrl+x",\n  "command": "whichkey.triggerKey",\n  "args": "C-x",\n  "when": "whichkeyVisible"\n}\n')),(0,o.kt)("p",null,"Once you've done that, you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"C-x")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," value of the which-key config.\nEffectively, the above keybinding will enter ",(0,o.kt)("inlineCode",{parentName:"p"},"C-x")," in the QuickPick input box when ",(0,o.kt)("inlineCode",{parentName:"p"},"ctrl+x")," is pressed when the which key is focused."),(0,o.kt)("h2",{id:"display-menu-with-a-delay"},"Display menu with a delay"),(0,o.kt)("p",null,"You can set ",(0,o.kt)("inlineCode",{parentName:"p"},"whichkey.delay")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.json")," to value in millisecond to delay the display of the menu."),(0,o.kt)("h2",{id:"display-menu-items-alphabetically"},"Display menu items alphabetically"),(0,o.kt)("p",null,"You can set ",(0,o.kt)("inlineCode",{parentName:"p"},"whichkey.sortOrder")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.json")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"alphabetically")," to always display the menu items alphabetically."),(0,o.kt)("h2",{id:"unclear-selection"},"Unclear selection"),(0,o.kt)("p",null,"Selected text can be hard to see when which-key menu is active.\nThis could be due to the ",(0,o.kt)("inlineCode",{parentName:"p"},"inactiveSelectionBackground")," config of your current theme.\nYou can selectively override that color in your ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.json")," like the following example."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"workbench.colorCustomizations": {\n    "editor.inactiveSelectionBackground": "color that works better",\n},\n')),(0,o.kt)("h2",{id:"style-the-menu-with-customize-ui"},"Style the menu with Customize UI"),(0,o.kt)("p",null,"VS Code unfortunately only allows for very limited styling of the QuickPick used by ",(0,o.kt)("inlineCode",{parentName:"p"},"which-key")," to display keys.\nHowever, using the ",(0,o.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=iocave.customize-ui"},"Customize UI")," extension,\nthe style sheet of the VS Code installation can be modified to result in a nicer appearance and better usability."),(0,o.kt)("p",null,"Suggested settings:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsonc"},'"customizeUI.stylesheet": {\n    // Let the quick pick take the full window height, so that more bindings\n    // are visible.\n    ".quick-input-widget > .quick-input-list > .monaco-list":\n        "max-height: none !important;",\n    // Colorize icons uniformly and add some extra padding\n    ".quick-input-widget > .quick-input-list .codicon":\n        "color: #83a598 !important; padding-right: 5px;",\n    // Colorize entries starting with a `+` differently\n    ".quick-input-widget > .quick-input-list .monaco-list-row[aria-label*=\\" +\\"] .label-description":\n        "color: #8ec07c;",\n}\n')),(0,o.kt)("p",null,"Those will result in something similar to the following:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Customize UI result",src:t(7355).Z})),(0,o.kt)("p",null,"In theory, it'd also be possible to achieve a multi-column display using those rules. However, those result in other Quick Pick dialogs being broken.\nSee ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/VSpaceCode/vscode-which-key/issues/37#issuecomment-857640609"},"the relevant issue")," for details."),(0,o.kt)("h2",{id:"conditional-bindings-experimental"},"Conditional bindings (experimental)"),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This feature is marked as experimental and the config is subject to change."))),(0,o.kt)("p",null,"This allows conditional execution of bindings.\nCurrently, it only supports conditions on the ",(0,o.kt)("inlineCode",{parentName:"p"},"when")," passed from shortcut and ",(0,o.kt)("inlineCode",{parentName:"p"},"languageId")," of the active editor."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"It reuses the similar structure to the ",(0,o.kt)("inlineCode",{parentName:"li"},"bindings")," type."),(0,o.kt)("li",{parentName:"ul"},"The property ",(0,o.kt)("inlineCode",{parentName:"li"},"key")," in a binding item is reused to represent the condition."),(0,o.kt)("li",{parentName:"ul"},"The condition can be thought of as a key-value pair serialized into a string.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"languageId:javascript;when:sideBarVisible")," is an example condition serialized into a string for the ",(0,o.kt)("inlineCode",{parentName:"p"},"key"),"\nthat checks if the language id of the currently active editor is javascript and if the side bar is visible\n(see the ",(0,o.kt)("a",{parentName:"p",href:"#when"},"when")," section for more details)."),(0,o.kt)("p",null,"A concrete example of a binding with that condition is as follow:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "whichkey.bindings": [\n    {\n      "key": "m",\n      "name": "Major...",\n      "type": "conditional",\n      "bindings": [\n        {\n          "key": "languageId:javascript;when:sideBarVisible",\n          "name": "Open file",\n          "type": "command",\n          "command": "workbench.action.files.openFileFolder"\n        },\n        {\n          "key": "",\n          "name": "Buffers",\n          "type": "bindings",\n          "bindings": [\n            {\n              "key": "b",\n              "name": "Show all buffers/editors",\n              "type": "command",\n              "command": "workbench.action.showAllEditors"\n            }\n          ]\n        },\n      ]\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"In this example, when ",(0,o.kt)("inlineCode",{parentName:"p"},"m")," is pressed, it will find the first binding that matches the current condition.\nIf no configured key matches the current condition, a default item showing a buffer menu will be used.\nAny item that has an invalid key will be used as default item."),(0,o.kt)("p",null,"Therefore, in this example, if the language is javascript and the sidebar is visible, ",(0,o.kt)("inlineCode",{parentName:"p"},"m"),' will open\nthe file browser, otherwise it will show the "buffers" menu.'),(0,o.kt)("h3",{id:"overrides"},"Overrides"),(0,o.kt)("p",null,"This is again similar with the ",(0,o.kt)("inlineCode",{parentName:"p"},"bindings")," type."),(0,o.kt)("p",null,"For example, the following config will override the ",(0,o.kt)("inlineCode",{parentName:"p"},"m")," binding completely:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "whichkey.bindingOverrides": [\n    {\n      "keys": "m",\n      "name": "Major",\n      "type": "conditional",\n      "bindings": [\n        {\n          "key": "languageId:javascript",\n          "name": "Go to",\n          "type": "command",\n          "command": "workbench.action.gotoLine",\n        }\n      ]\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"You can also choose to add or remove conditions to existing conditional bindings.\nFor example, the following will add a key of ",(0,o.kt)("inlineCode",{parentName:"p"},"languageId:javascript")," to the conditional binding if ",(0,o.kt)("inlineCode",{parentName:"p"},"languageId:javascript")," doesn't already exist."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "whichkey.bindingOverrides": [\n    {\n      "keys": ["m", "languageId:javascript"],\n      "name": "Go to",\n      "type": "command",\n      "command": "workbench.action.gotoLine",\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"Negative ",(0,o.kt)("inlineCode",{parentName:"p"},"position")," property can also be used to remove conditional bindings."),(0,o.kt)("h3",{id:"when"},"when"),(0,o.kt)("p",null,"Since VSCode doesn't allow reading of the context of a json field, we cannot read the condition used in the ",(0,o.kt)("inlineCode",{parentName:"p"},"when")," in shortcuts.\nFor this reason, you will need to repeat every ",(0,o.kt)("inlineCode",{parentName:"p"},"when")," condition used in conditional bindings, at least until\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/vscode/issues/10471"},"vscode/#10471")," is implemented."),(0,o.kt)("p",null,"For example, the following shortcut in ",(0,o.kt)("inlineCode",{parentName:"p"},"keybindings.json")," will pass both ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"when")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"args")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"which-key"),".\nThe outer ",(0,o.kt)("inlineCode",{parentName:"p"},"when")," is the ",(0,o.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts"},"condition clause"),"\nfor vscode to execute this key, and must contain ",(0,o.kt)("inlineCode",{parentName:"p"},"whichKeyVisible")," which limits this shortcut to be only applicable when the which-key menu is visible.\nIn this case, if a user presses key ",(0,o.kt)("inlineCode",{parentName:"p"},"t")," when which-key, sidebar and explorer viewlet are visible, it will execute ",(0,o.kt)("inlineCode",{parentName:"p"},"whichkey.triggerKey"),"\ncommand and send the ",(0,o.kt)("inlineCode",{parentName:"p"},"args")," (",(0,o.kt)("inlineCode",{parentName:"p"},"key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"when"),") to  ",(0,o.kt)("inlineCode",{parentName:"p"},"which-key")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "key": "t",\n  "command": "whichkey.triggerKey",\n  "args": {\n    "key": "t",\n    "when": "sideBarVisible && explorerViewletVisible"\n  },\n  "when": "whichkeyVisible && sideBarVisible && explorerViewletVisible"\n}\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"args.key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"args.when")," that were sent to ",(0,o.kt)("inlineCode",{parentName:"p"},"which-key")," are then used to find the a binding that matches the key ",(0,o.kt)("inlineCode",{parentName:"p"},"t"),"\nand any conditional binding that matches that condition. The following binding is an example that contains a conditional binding that matches the ",(0,o.kt)("inlineCode",{parentName:"p"},"args"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "key": "t",\n  "name": "Show tree/explorer view",\n  "type": "conditional",\n  "bindings": [\n    {\n      "key": "",\n      "name": "default",\n      "type": "command",\n      "command": "workbench.view.explorer"\n    },\n    {\n      "key": "when:sideBarVisible && explorerViewletVisible",\n      "name": "Hide explorer",\n      "type": "command",\n      "command": "workbench.action.toggleSidebarVisibility"\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"Unfortunately, if you have another condition binding with a different ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," that want to match the same\n",(0,o.kt)("inlineCode",{parentName:"p"},"when")," condition as the ",(0,o.kt)("inlineCode",{parentName:"p"},"t")," in the above example, you will need to setup another shortcut with that different ",(0,o.kt)("inlineCode",{parentName:"p"},"key"),"."),(0,o.kt)("h3",{id:"languageid"},"languageId"),(0,o.kt)("p",null,"This is language id of the active editor. The language id can be found in language selection menu inside the parenthesis next to the language name."))}h.isMDXComponent=!0},7355:function(e,n,t){n.Z=t.p+"assets/images/customize_ui-c05d276fae62fb90bb710347fd394284.png"}}]);